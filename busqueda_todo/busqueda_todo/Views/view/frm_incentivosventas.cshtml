

@{ Register Src="controles/Menu.ascx" TagName="Menu" TagPrefix="uc1" }
@{ Register Assembly="Anthem" Namespace="Anthem" TagPrefix="anthem" }
@{ Register Src="controles/CloseSession.ascx" TagName="CloseSession" TagPrefix="uc2" }
@{ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolkit" }
@{ Register Src="controles/Ctr_Usuario.ascx" TagName="Ctr_Usuario" TagPrefix="uc3" }
@{ Register assembly="Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" namespace="Microsoft.Reporting.WebForms" tagprefix="rsweb" }

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>T3Web -
        @{ Response.Write(_Str_TituloPantalla);}
</title>
    <link rel="stylesheet" type="text/css" href="StyleSheet.css" />

    <script type="text/javascript">
        function _Mtd_Onload() {
            document.getElementById('progressBackgroundFilter1').style.display = "block";
        }
    </script>
</head>
<body topmargin="0" onload="_Mtd_Onload();" class="cuerpo">
    <form id="form1" runat="server">
    <center>
        <asp:ScriptManager ID="ScriptManager1" runat="server" EnableScriptGlobalization="True"
            EnableScriptLocalization="False">
        </asp:ScriptManager>
        <asp:UpdatePanel ID="_UP_Menu" runat="server">
            <ContentTemplate>
                <table style="width: 780px;" cellpadding="0" cellspacing="0">
                    <tr>
                        <td align="center">
                            <uc1:Menu ID="Menu1" runat="server" />
                        </td>
                    </tr>
                    <tr>
                        <td align="left" bgcolor="#BBD4F8" style="border: 1px solid #3b619c">
                            <table width="100%">
                                <tr>
                                    <td width="5">
                                        <font face="Verdana" size="1"><strong><span>
                                            <asp:ImageButton Style="cursor: default" ID="ImageButton1" runat="server" ImageUrl="image/separator.gif" />
                                        </span></strong></font>
                                    </td>
                                    <td width="45">
                                        <font face="Verdana" size="1"><strong><span>
                                            <asp:UpdatePanel ID="_UP_MenuPrincipal" runat="server">
                                                <ContentTemplate>
                                                    <asp:ImageButton ID="_Img_Nuevo" runat="server" ImageUrl="image/new.gif" />
                                                    <asp:ImageButton ID="_Img_Guardar" runat="server" ImageUrl="image/save.gif" />
                                                </ContentTemplate>
                                            </asp:UpdatePanel>
                                        </span></strong></font>
                                    </td>
                                    <td width="10%">
                                        <font face="Verdana" size="1"><strong><span>
                                            <asp:ImageButton Style="cursor: default" ID="ImageButton6" runat="server" ImageUrl="image/separator.gif" />
                                        </span></strong></font>
                                        <uc2:CloseSession ID="CloseSession2" runat="server" />
                                    </td>
                                    <td style="text-align: right">
                                        <uc3:Ctr_Usuario ID="Ctr_Usuario1" runat="server" />
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td align="center" bgcolor="#666666">
                            <asp:Label ID="_Lbl_TituloPantalla" runat="server" Text="Título del la pantalla" Font-Bold="True"
                                Font-Names="Verdana" Font-Size="8pt" ForeColor="White"></asp:Label>
                        </td>
                    </tr>
                </table>
            </ContentTemplate>
        </asp:UpdatePanel>
        
        <asp:UpdatePanel ID="_UP_Principal" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <table class="textoRegular" width="780px" cellpadding="0" cellspacing="1" border=0>
                    <tr>
                        <td align="right" width="150px">
                            <b>
                                <asp:Label ID="_Lbl_Compania" runat="server" Text="Compañía :"></asp:Label>
                            </b>
                        </td>
                        <td align="left" width="5px"></td>
                        <td align="left" Width="320px">
                            <asp:DropDownList ID="_Cb_Compania" runat="server" CssClass="textoRegular" Width="320px"
                                AutoPostBack="True" Font-Size="7pt" 
                                onselectedindexchanged="_Cb_Compania_SelectedIndexChanged">
                            </asp:DropDownList>
                        </td>
                    </tr>
                </table>
                <br>
                <table style="width: 780px;" cellpadding="5" cellspacing="0" border=0>
                    <tr>
                        <td>
                            <asp:Panel ID="_Pnl_Ejecucion" runat="server">
                                <table width='100%' class="textoRegular">
                                    <tr>
                                        <td>
                                            <span style="color:Blue  ">Ejecución</span>
                                        </td>
                                    </tr>
                                    <tr>
                                    <td>
                                            <asp:DropDownList ID="_Cb_AnoEjecucion" runat="server" CssClass="textoRegular" Width='100px'
                                                AutoPostBack="True" 
                                                onselectedindexchanged="_Cb_AnoEjecucion_SelectedIndexChanged">
                                            </asp:DropDownList>
                                            &nbsp;
                                            <asp:DropDownList ID="_Cb_MesEjecucion" runat="server" CssClass="textoRegular" Width='150px'
                                                AutoPostBack="True" 
                                                onselectedindexchanged="_Cb_MesEjecucion_SelectedIndexChanged">
                                                <asp:ListItem Value="1">ENERO</asp:ListItem>
                                                <asp:ListItem Value="2">FEBRERO</asp:ListItem>
                                                <asp:ListItem Value="3">MARZO</asp:ListItem>
                                                <asp:ListItem Value="4">ABRIL</asp:ListItem>
                                                <asp:ListItem Value="5">MAYO</asp:ListItem>
                                                <asp:ListItem Value="6">JUNIO</asp:ListItem>
                                                <asp:ListItem Value="7">JULIO</asp:ListItem>
                                                <asp:ListItem Value="8">AGOSTO</asp:ListItem>
                                                <asp:ListItem Value="9">SEPTIEMBRE</asp:ListItem>
                                                <asp:ListItem Value="10">OCTUBRE</asp:ListItem>
                                                <asp:ListItem Value="11">NOVIEMBRE</asp:ListItem>
                                                <asp:ListItem Value="12">DICIEMBRE</asp:ListItem>
                                            </asp:DropDownList>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                            <span style="color:Blue  ">Año y mes en los cuales se ejecutará el cálculo.</span>
                                        </td>
                                    </tr>
                                </table>
                            </asp:Panel>
                        </td>
                     </tr>
                     <tr>
                        <td>
                            <asp:Panel ID="_Pnl_Rango" runat="server"><br>
                                <table width='100%' class="textoRegular">
                                    <tr>
                                        <td>
                                            <span style="color:Red">Rango de fecha de ventas</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        
                                        <td>
                                            <asp:DropDownList ID="_Cb_AnoRango" runat="server" CssClass="textoRegular" Width='100px'
                                                AutoPostBack="True" 
                                                onselectedindexchanged="_Cb_AnoRango_SelectedIndexChanged">
                                            </asp:DropDownList>
                                            &nbsp;
                                            <asp:DropDownList ID="_Cb_MesRango" runat="server" CssClass="textoRegular" Width='150px'
                                                AutoPostBack="True" 
                                                onselectedindexchanged="_Cb_MesRango_SelectedIndexChanged">
                                                <asp:ListItem Value="1">ENERO</asp:ListItem>
                                                <asp:ListItem Value="2">FEBRERO</asp:ListItem>
                                                <asp:ListItem Value="3">MARZO</asp:ListItem>
                                                <asp:ListItem Value="4">ABRIL</asp:ListItem>
                                                <asp:ListItem Value="5">MAYO</asp:ListItem>
                                                <asp:ListItem Value="6">JUNIO</asp:ListItem>
                                                <asp:ListItem Value="7">JULIO</asp:ListItem>
                                                <asp:ListItem Value="8">AGOSTO</asp:ListItem>
                                                <asp:ListItem Value="9">SEPTIEMBRE</asp:ListItem>
                                                <asp:ListItem Value="10">OCTUBRE</asp:ListItem>
                                                <asp:ListItem Value="11">NOVIEMBRE</asp:ListItem>
                                                <asp:ListItem Value="12">DICIEMBRE</asp:ListItem>
                                            </asp:DropDownList>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span style="color:Red">Año y mes de ventas.</span>
                                        </td>
                                    </tr>
                                </table>
                            </asp:Panel>
                        </td>
                    </tr>
                </table>
        
                
                <asp:Panel ID="_Pnl_Principal" runat="server">
                        <br><br>
                @*--------------------------------------------------------------------------------------------------------------------------------------------*@
                <table style="width: 780px;" cellpadding="0" cellspacing="0">
                    <tr>
                        <td>
                            <table style="border-style: outset; border-collapse: collapse; border-color: black;
                                border-width: 1px" width='100%' class="textoRegular">
                                <tr>
                                    <td>
                                        <asp:CheckBox ID="_CHK_ActivarEjecucion1" runat="server" CssClass="textoRegular" 
                                            Text="&lt;b&gt;Ejecución 1&lt;/b&gt;" Checked="True" Enabled="False" />
                                    </td>
                                    <td>
                                        <table width='100%'>
                                            <tr>
                                                <td>
                                                    <table width='100%'>
                                                        <tr>
                                                            <td align="middle">
                                                                <span style="color:Blue  ">Fecha ejecución :</span><br><br>
                                                                <asp:DropDownList ID="_Cb_FechaEjecucion1" runat="server" 
                                                                    CssClass="textoRegular" Width="40px" AutoPostBack="True"></asp:DropDownList>
                                                                <asp:Label ID="_Lbl_FechaEjecucion1" runat="server" Text="??/??/????" CssClass="textoRegular"></asp:Label><br><br>
 
                                                            </td>
                                                            
                                                            <td align="middle">
                                                                <span style="color:Red">Ventas desde :</span><br><br>
                                                                   <asp:DropDownList ID="_Cb_Rango1Desde" runat="server" CssClass="textoRegular" 
                                                                       Width="40px" AutoPostBack="True"></asp:DropDownList>
                                                                <asp:Label ID="_Lbl_Rango1Desde" runat="server" Text="??/??/????" 
                                                                       CssClass="textoRegular"></asp:Label>
                                                            </td>
                                                            <td align="middle">
                                                                <span style="color:Red">Ventas hasta :</span><br><br>
                                                                <asp:DropDownList ID="_Cb_Rango1Hasta" runat="server" CssClass="textoRegular" 
                                                                    Width="40px" AutoPostBack="True"></asp:DropDownList>
                                                                <asp:Label ID="_Lbl_Rango1Hasta" runat="server" Text="??/??/????" 
                                                                    CssClass="textoRegular"></asp:Label>
                                                            </td>
                                                         </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
                @*--------------------------------------------------------------------------------------------------------------------------------------------*@
                <center><span class="textoRegular">La configuración de la Ejecución 1 es <b>obligatoria</b>.</span></center>
                <br><br>
                @*--------------------------------------------------------------------------------------------------------------------------------------------*@
                <table style="width: 780px;" cellpadding="0" cellspacing="0">
                    <tr>
                        <td>
                            <table style="border-style: outset; border-collapse: collapse; border-color: black;
                                border-width: 1px" width='100%' class="textoRegular">
                                <tr>
                                    <td>
                                        <asp:CheckBox ID="_CHK_ActivarEjecucion2" runat="server" CssClass="textoRegular" 
                                            Text="&lt;b&gt;Ejecución 2&lt;/b&gt;" 
                                            oncheckedchanged="_CHK_ActivarEjecucion2_CheckedChanged" 
                                            AutoPostBack="True" />
                                    </td>
                     
                                    <td>
                                        <table width='100%'>
                                            <tr>
                                                <td>
                                                    <table width='100%'>
                                                        <tr>
                                                            <td align="middle">
                                                                <span style="color:Blue  ">Fecha ejecución :</span><br><br>
                                                                <asp:DropDownList ID="_Cb_FechaEjecucion2" runat="server" 
                                                                    CssClass="textoRegular" Width="40px" AutoPostBack="True" Enabled="False"></asp:DropDownList>
                                                                <asp:Label ID="_Lbl_FechaEjecucion2" runat="server" Text="??/??/????" 
                                                                    CssClass="textoRegular"></asp:Label><br><br>
                                                            </td>
                                                            <td align="middle">
                                                                <span style="color:Red">Ventas desde :</span><br><br>
                                                                <asp:DropDownList ID="_Cb_Rango2Desde" runat="server" CssClass="textoRegular" 
                                                                    Width="40px" AutoPostBack="True" Enabled="False"></asp:DropDownList>
                                                                <asp:Label ID="_Lbl_Rango2Desde" runat="server" Text="??/??/????" 
                                                                    CssClass="textoRegular"></asp:Label>
                                                            </td>
                                                            <td align="middle">
                                                                <span style="color:Red">Ventas hasta :</span><br><br>
                                                                <asp:DropDownList ID="_Cb_Rango2Hasta" runat="server" CssClass="textoRegular" 
                                                                    Width="40px" AutoPostBack="True" Enabled="False"></asp:DropDownList>
                                                                <asp:Label ID="_Lbl_Rango2Hasta" runat="server" Text="??/??/????" 
                                                                    CssClass="textoRegular"></asp:Label>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
                @*--------------------------------------------------------------------------------------------------------------------------------------------*@
                <center><span class="textoRegular">La configuración de la Ejecución 2 es <b>opcional</b>.</span></center>
                
                </asp:Panel>
                
                <br><br>                   
                <asp:Button ID="_Btn_Guardar" runat="server" Text="Guardar" BorderStyle="Solid" 
                    CssClass="textoRegular" Visible="False" onclick="_Btn_Guardar_Click" />
                 
                <asp:Button ID="_Btn_CrearMes" runat="server" BorderStyle="Solid" 
                    CssClass="textoRegular" Text="Crear configuración" 
                    Visible="False" onclick="_Btn_CrearMes_Click" />

                
            </ContentTemplate>
        </asp:UpdatePanel>

 	     @*messagebox ----------------------------------------------------------------------------------------------------------------------*@
        <asp:Button runat="server" ID="_Btn_MessageBoxHidden" Style="display: none" />
        <ajaxToolkit:ModalPopupExtender runat="server" ID="_MPE_MessageBox" BehaviorID="_MPE_MessageBoxBehavior"
            TargetControlID="_Btn_MessageBoxHidden" PopupControlID="_Pnl_MessageBoxPopup"
            BackgroundCssClass="modalBackground" DropShadow="True" RepositionMode="RepositionOnWindowScroll">
        </ajaxToolkit:ModalPopupExtender>
        <asp:Panel runat="server" CssClass="modalPopup" ID="_Pnl_MessageBoxPopup" Style="display: none;padding: 10px" Width="700px">
            <asp:Panel runat="Server" ID="_Pnl_MessageBox" Style="background-color: #FFFFFF; border: solid 1px Gray; color: Black; text-align: center;">
                <asp:UpdatePanel ID="_UP_MessageBox" runat="server">
                    <ContentTemplate>
                        <table style="width: 100%;">
                            <tr valign="top">
                                <td>
                                    <asp:Label ID="_Lbl_MessageBox" runat="server" Font-Names="Verdana" Font-Size="8pt"></asp:Label><br /><br />
                                    <asp:Button ID="_Btn_MessageBoxAceptar" runat="server" BorderColor="Black" BorderStyle="Solid" BorderWidth="1px" Font-Names="Verdana" Font-Size="8pt" Text="Aceptar" OnClick="_Btn_MessageBoxAceptar_Click" Style="height: 19px" />
                                </td>
                            </tr>
                        </table>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </asp:Panel>
        </asp:Panel>
        @*messagebox ----------------------------------------------------------------------------------------------------------------------*@

        @*update progress ----------------------------------------------------------------------------------------------------------------------*@
        <div style="position: fixed; z-index: 100600; font-family: verdana; font-size: 9px;
            font-weight: bold; background-color: #FFFFFF;">
            <asp:UpdateProgress ID="_UPR_Principal" runat="server" AssociatedUpdatePanelID="_UP_Principal"
                DisplayAfter="1000">
                <ProgressTemplate>
                    <center>
                        <div id="progressBackgroundFilter1" style="display: none" class="progressBackgroundFilter">
                        </div>
                        <div id="processMessage" style="border: 1px solid #000000" style="left: 34%; top: 34%">
                            <img alt="Procesando" src="images/animated_loading.gif"><br>
                            Procesando. Por favor espere...
                        </div>
                    </center>
                </ProgressTemplate>
            </asp:UpdateProgress>
        </div>
        @*update progress ----------------------------------------------------------------------------------------------------------------------*@
        
   
    </center>
    </form>
</body>
</html>